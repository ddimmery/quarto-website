"""
Utility module for inline SVG icons.
Provides Bootstrap Icons and Academicons as inline SVG to eliminate the need for
bootstrap-icons.css and academicons.css
"""

# All icons are sized to 16x16 for consistency in buttons
# Bootstrap Icons use viewBox="0 0 16 16"
BOOTSTRAP_ICONS = {
    "bi-file-earmark-pdf": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2M9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"/><path d="M4.603 14.087a.8.8 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.7 7.7 0 0 1 1.482-.645 20 20 0 0 0 1.062-2.227 7.3 7.3 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.188-.012.396-.047.614-.084.51-.27 1.134-.52 1.794a11 11 0 0 0 .98 1.686 5.8 5.8 0 0 1 1.334.05c.364.066.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.86.86 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.7 5.7 0 0 1-.911-.95 11.7 11.7 0 0 0-1.997.406 11.3 11.3 0 0 1-1.02 1.51c-.292.35-.609.656-.927.787a.8.8 0 0 1-.58.029m1.379-1.901q-.25.115-.459.238c-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361q.016.032.026.044l.035-.012c.137-.056.355-.235.635-.572a8 8 0 0 0 .45-.606m1.64-1.33a13 13 0 0 1 1.01-.193 12 12 0 0 1-.51-.858 21 21 0 0 1-.5 1.05zm2.446.45q.226.245.435.41c.24.19.407.253.498.256a.1.1 0 0 0 .07-.015.3.3 0 0 0 .094-.125.44.44 0 0 0 .059-.2.1.1 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a4 4 0 0 0-.612-.053zM8.078 7.8a7 7 0 0 0 .2-.828q.046-.282.038-.465a.6.6 0 0 0-.032-.198.5.5 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822q.036.167.09.346z"/></svg>',

    "bi-github": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/></svg>',

    "bi-database": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4.318 2.687C5.234 2.271 6.536 2 8 2s2.766.27 3.682.687C12.644 3.125 13 3.627 13 4c0 .374-.356.875-1.318 1.313C10.766 5.729 9.464 6 8 6s-2.766-.27-3.682-.687C3.356 4.875 3 4.373 3 4c0-.374.356-.875 1.318-1.313M13 5.698V7c0 .374-.356.875-1.318 1.313C10.766 8.729 9.464 9 8 9s-2.766-.27-3.682-.687C3.356 7.875 3 7.373 3 7V5.698c.271.202.58.378.904.525C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777A5 5 0 0 0 13 5.698M14 4c0-1.007-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1s-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4v9c0 1.007.875 1.755 1.904 2.223C4.978 15.71 6.427 16 8 16s3.022-.289 4.096-.777C13.125 14.755 14 14.007 14 13zm-1 4.698V10c0 .374-.356.875-1.318 1.313C10.766 11.729 9.464 12 8 12s-2.766-.27-3.682-.687C3.356 10.875 3 10.373 3 10V8.698c.271.202.58.378.904.525C4.978 9.71 6.427 10 8 10s3.022-.289 4.096-.777A5 5 0 0 0 13 8.698m0 3V13c0 .374-.356.875-1.318 1.313C10.766 14.729 9.464 15 8 15s-2.766-.27-3.682-.687C3.356 13.875 3 13.373 3 13v-1.302c.271.202.58.378.904.525C4.978 12.71 6.427 13 8 13s3.022-.289 4.096-.777c.324-.147.633-.323.904-.525"/></svg>',

    "bi-info": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/></svg>',

    "bi-box-seam": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2zm3.564 1.426L5.596 5 8 5.961 14.154 3.5zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464z"/></svg>',
}

# Academicons SVG data - viewBox varies, sized to 16x16 for consistency
# Source: https://github.com/jpswalsh/academicons
ACADEMICONS = {
    "ai-archive": '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 448 512"><path d="M 393.67442,430.13954 V 448 H 54.32558 l 0.004,-17.86046 z m -13.39535,-26.7907 v 22.32558 H 67.72093 v -22.32558 z m -279.82718,-241.11628 3.72578,1.88307 1.86463,30.111 1.86468,48.92719 v 47.05495 l -1.86468,58.65578 -0.31033,39.51552 -5.28008,1.57342 H 81.81596 l -5.59041,-1.57342 -2.1713,-39.51552 -1.8682,-58.3425 v -47.05139 l 1.8682,-49.24403 1.70425,-30.27304 3.88621,-1.72103 z m 267.90907,0 3.73007,1.88307 1.86146,30.111 1.86147,48.92719 v 47.05495 l -1.86147,58.65578 -0.30675,39.51552 -5.28478,1.57342 h -18.6361 l -5.59153,-1.57342 -2.17884,-39.51552 -1.86146,-58.3425 v -47.05139 l 1.86146,-49.24403 1.7117,-30.27304 3.8834,-1.72103 z m -187.5377,0 3.7261,1.88307 1.86486,30.111 1.86485,48.92719 v 47.05495 l -1.86485,58.65578 -0.30676,39.51552 -5.2842,1.57342 h -18.63779 l -5.59457,-1.57342 -2.17148,-39.51552 -1.86128,-58.3425 v -47.05139 l 1.86128,-49.24403 1.71153,-30.27304 3.87947,-1.72103 z m 102.69768,0 3.72609,1.88307 1.86486,30.111 1.86486,48.92719 v 47.05495 l -1.86486,58.65578 -0.30675,39.51552 -5.2842,1.57342 h -18.6378 l -5.59099,-1.57342 -2.17505,-39.51552 -1.86128,-58.3425 v -47.05139 l 1.86128,-49.24403 1.71152,-30.27304 3.883,-1.72103 z m 96.75813,-40.18605 v 31.25581 H 67.72093 V 122.04651 Z M 220.78476,64 l 163.95943,37.5464 -6.57274,11.56988 H 64.14879 l -9.82321,-9.383 z"/></svg>',
}

# Combine all icon dictionaries
ALL_ICONS = {**BOOTSTRAP_ICONS, **ACADEMICONS}


def get_icon_svg(icon_name):
    """
    Get inline SVG for an icon (Bootstrap or Academicons).

    Args:
        icon_name: The icon class name (e.g., 'bi-github' or 'ai-archive')

    Returns:
        SVG string if icon is in the mapping, None otherwise
    """
    return ALL_ICONS.get(icon_name)


def button(url, str, icon):
    """
    Create a button with an icon. Uses inline SVG when available,
    falls back to <i> tag with CSS classes for icons not in our mapping.

    Args:
        url: The link URL
        str: The button text
        icon: The icon class name (e.g., 'bi-github', 'ai-archive')

    Returns:
        HTML string for the button
    """
    icon_svg = get_icon_svg(icon)

    if icon_svg:
        # Use inline SVG for mapped icons
        return f"""<a class="btn btn-outline-dark btn-sm", href="{url}" target="_blank" rel="noopener noreferrer">
        {icon_svg}
        {str}
    </a>"""
    else:
        # Fallback to icon font for unmapped icons
        icon_base = icon[:2]
        return f"""<a class="btn btn-outline-dark btn-sm", href="{url}" target="_blank" rel="noopener noreferrer">
        <i class="{icon_base} {icon}" role='img' aria-label='{str}'></i>
        {str}
    </a>"""
